# 프로젝트 진행 로그 - TMS v2
날짜: 2025-12-01
마지막 작업: 테스트 케이스 CRUD, 대시보드, 리포팅 구현 및 E2E 검증

## 1. 프로젝트 개요
- **목표:** TestRail을 대체할 테스트 관리 시스템 (TMS) 구축
- **기술 스택:**
  - 프론트엔드: React + TypeScript + Vite + Tailwind CSS v3.4.1
  - 백엔드: Node.js + Express
  - 데이터베이스: SQLite (Prisma ORM)
  - 인증: JWT (Access Token)
  - 아이콘: Lucide React
  - 테스트: Playwright (E2E)

## 2. 구현된 기능 (타임라인)

### 1단계: 초기화 및 인증
- [x] Git 저장소 설정 (https://github.com/koesnuj/TMS_v2)
- [x] 백엔드/프론트엔드 프로젝트 구조 설정
- [x] 사용자 모델 (User, 역할: USER/ADMIN, 상태: PENDING/ACTIVE/REJECTED)
- [x] 인증 API (회원가입, 로그인, 내 정보)
- [x] 관리자 API (사용자 승인, 사용자 목록)
- [x] 프론트엔드 인증 페이지 (로그인, 회원가입) & AuthContext

### 2단계: 테스트 케이스 관리
- [x] 폴더 모델 (계층 구조)
- [x] 테스트케이스 모델 (필드: 제목, 설명, 전제조건, 단계, 우선순위 등)
- [x] 폴더 API (트리 뷰, 생성)
- [x] 테스트케이스 API (생성, 폴더별 목록 조회)
- [x] CSV 가져오기 API (헤더 매핑을 통한 대량 생성)
- [x] 프론트엔드 UI:
  - FolderTree 컴포넌트 (재귀적)
  - TestCasesPage (분할 뷰: 트리 + 리스트)
  - CreateTestCaseModal (단일 생성)
  - CsvImportModal (대량 생성)

### 3단계: 테스트 계획 및 실행
- [x] 플랜 모델 (이름, 설명, 상태, 생성자)
- [x] 플랜 아이템 모델 (플랜 <-> 테스트케이스 연결, 결과 저장: PASS/FAIL 등)
- [x] 플랜 API:
  - 플랜 생성 (트랜잭션: 플랜 + 플랜 아이템)
  - 플랜 목록 (진행률 % 및 상태 카운트 계산)
  - 플랜 상세 조회 (아이템 포함)
- [x] **테스트 실행 기능**:
  - **개별 업데이트**: `PATCH /api/plans/:planId/items/:itemId` (결과, 메모)
  - **벌크 업데이트**: `PATCH /api/plans/:planId/items/bulk` (여러 항목 결과 일괄 변경)
  - **자동 링크**: 메모 내 URL을 자동으로 클릭 가능한 링크로 변환
- [x] 프론트엔드 UI:
  - PlansPage (진행률 바가 포함된 목록 뷰)
  - CreatePlanPage (테스트케이스 검색 및 선택)
  - **PlanDetailPage (실행 UI)**:
    - 인터랙티브 상태 드롭다운 (PASS/FAIL/BLOCK/NOT_RUN)
    - 메모 모달 (URL 지원 텍스트 영역)
    - 벌크 액션 바 (전체 선택, 일괄 업데이트)
    - 실시간 진행률 바 업데이트

### 4단계: UI/UX 전면 리디자인 (2025-11-28)
- [x] **디자인 시스템 구축**: UI 컴포넌트 라이브러리 생성 (`Button`, `Card`, `Badge`, `Input`)
- [x] **레이아웃 전환**: 좌측 사이드바 구조 (TestRail 스타일)
- [x] **색상 팔레트 변경**: Slate + Indigo 테마
- [x] **페이지별 리디자인**: 모든 페이지 마이그레이션 완료
- [x] **고급 시각화**: 다색 도넛 차트, 스택형 프로그레스바 구현
- [x] **3-컬럼 레이아웃**: Test Runs / Table / Details 구조 최적화
- [x] **Bulk Select/Edit**: 체크박스 및 일괄 변경 기능 추가
- [x] **프로필 동기화**: 사용자 이름 변경 시 기존 데이터 자동 업데이트

### 5단계: 핵심 기능 고도화 및 대시보드 (2025-12-01)
- [x] **테스트 케이스 CRUD 완성**:
  - `TestCaseFormModal`: 생성 및 수정(Edit) 통합 모달 구현
  - 삭제(Delete) 기능 및 확인 모달 구현
  - 폴더 이동 기능 지원 (드롭다운 선택 방식)
- [x] **대시보드 (Dashboard) 구현**:
  - `/` 경로에 대시보드 페이지 신설
  - **Stats Widgets**: 총 케이스 수, 활성 플랜, 총 실행 수, 내 할당 작업 수
  - **My Assignments**: 나에게 할당된 작업 목록 (바로가기 링크 포함)
  - **Recent Activity**: 최근 실행 이력 타임라인
- [x] **리포팅 (Reporting) 기능 구현**:
  - `jspdf`, `xlsx` 라이브러리 통합
  - **Export to PDF**: 플랜 실행 결과를 PDF 문서로 내보내기 (요약 + 테이블)
  - **Export to Excel**: 상세 데이터 엑셀 다운로드
- [x] **TestCasesPage 개선**:
  - 'All Cases' (Root) 보기 기능 추가
  - 폴더 선택 해제 및 전체 목록 조회 UX 개선
- [x] **E2E 테스트 강화**:
  - `testcase_management.spec.ts` 작성
  - 로그인, 폴더 생성, 케이스 CRUD, 폴더 이동 전체 시나리오 검증 완료

## 3. 데이터베이스 스키마 (Prisma)
```prisma
model User {
  id, email, password, name, role, status, ...
}

model Folder {
  id, name, parentId, parent, children[], testCases[], ...
}

model TestCase {
  id, title, description, priority, folderId, planItems[], ...
}

model Plan {
  id, name, description, status, createdBy, items[], ...
}

model PlanItem {
  id, planId, testCaseId, assignee, result, comment, executedAt, ...
}
```

## 4. 주요 파일 및 구조

### Backend
- `backend/src/controllers/`: authController, adminController, folderController, testcaseController, planController, **dashboardController**
- `backend/src/routes/`: auth, admin, folders, testcases, plans, **dashboard**

### Frontend - 컴포넌트
- `frontend/src/components/`:
  - **레이아웃**: `Layout.tsx`, `Sidebar.tsx`, `Header.tsx`
  - **UI 컴포넌트**: `ui/Button.tsx`, `ui/Card.tsx`, `ui/Badge.tsx`, `ui/Input.tsx`, `ui/ConfirmModal.tsx`
  - **기능 컴포넌트**: `FolderTree.tsx`, `TestCaseFormModal.tsx`, `RunSummary.tsx`, `StackedProgressBar.tsx`

### Frontend - 페이지
- `frontend/src/pages/`:
  - `HomePage.tsx` (대시보드)
  - `TestCasesPage.tsx` (테스트 케이스 관리)
  - `PlanDetailPage3Column.tsx` (실행 및 리포팅)
  - `AdminPage.tsx` (사용자 관리)

### 테스트
- `tests/`: auth.spec.ts, plan_execution.spec.ts, **testcase_management.spec.ts**

## 5. 현재 상태 및 이슈
- **상태:** 테스트 케이스 CRUD, 대시보드, 리포팅 기능까지 구현되어 실무 사용 가능한 수준(MVP)에 도달함.
- **최근 이벤트 (2025-12-01)**:
  - 테스트 케이스 수정/삭제 기능 구현 및 E2E 테스트 통과
  - 대시보드 페이지 오픈 (통계/할당/활동)
  - PDF/Excel 리포트 생성 기능 추가
  - 로그인 토큰 처리 버그 수정 (accessToken 명칭 통일)
- **조치 필요:**
  - 없음. 시스템 안정적이며 모든 주요 기능 테스트 완료.

## 6. 다음 단계
1. **고급 기능:**
   - 플랜 복제 및 재실행
   - 테스트 케이스 순서 변경 (Drag & Drop)
   - 이미지 첨부 기능
   - 사용자별 알림 시스템

2. **성능 최적화:**
   - 대규모 데이터를 위한 가상 스크롤링
   - 검색 기능 강화 (Full-text search)

3. **CI/CD 파이프라인:**
   - GitHub Actions 설정
   - 자동 배포 구성
